<%= stylesheet_link_tag "users", :media => "all" %>
<div class="container-fluid">
  <div class="full-page">

     <%= render 'public/homes/header', current_user: current_user %>
     <div class= "row text-white">
      <div class="col-md-12">
      <div class="chat-room">
      <h1>メッセージ</h1>

         <% @RoomUsers.each do |r| %>
         <div class="user-name">
         <strong>
               <%= r.name %>さん
             </a>
         </strong>
         </div>
         <% end %>


         <hr>
         <div class="chats">


           <div class="chat">
             <% if @messages.present? %>
               <% @messages.each do |m| %>
                 <div class="chat-box">
                   <div class="chat-text">
                     <%= m.body %>
                     <%= m.created_at.strftime("%Y-%m-%d %H:%M") %>
                   </div>
                 </div>
               <% end %>
               <% else %>
                 <p>メッセージはまだありません</p>
             <% end %>
           </div>



           <div class="posts">
             <%= form_with model: @message, url: room_messages_path(params[:id]), local: true do |f| %>
               <%= f.text_field :body, placeholder: "メッセージを入力してください" %>
               <%= f.hidden_field :room_id, value: @room.id %>
               <%= f.submit "送信する" %>
             <% end %>
           </div>


         </div>
        </div>
        </div>
    </div>
  </div>
</div>